<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The DataPackageR YAML configuration file. • DataPackageR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The DataPackageR YAML configuration file.">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DataPackageR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.15.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/YAML_CONFIG.html">The DataPackageR YAML configuration file.</a>
    </li>
    <li>
      <a href="../articles/usingDataPackageR.html">Using DataPackageR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/DataPackageR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>The DataPackageR YAML configuration file.</h1>
                        <h4 class="author">Greg Finak <a href="mailto:gfinak@fredhutch.org" class="email">gfinak@fredhutch.org</a>
</h4>
            
            <h4 class="date">2018-10-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/DataPackageR/blob/master/vignettes/YAML_CONFIG.Rmd"><code>vignettes/YAML_CONFIG.Rmd</code></a></small>
      <div class="hidden name"><code>YAML_CONFIG.Rmd</code></div>

    </div>

    
    
<div id="configuring-and-controlling-datapackager-builds-" class="section level1">
<h1 class="hasAnchor">
<a href="#configuring-and-controlling-datapackager-builds-" class="anchor"></a>Configuring and controlling DataPackageR builds.</h1>
<p>Data package builds are controlled using the <code>datapackager.yml</code> file.</p>
<p>This file is created in the package source tree when the user creates a package using <code><a href="../reference/datapackage_skeleton.html">datapackage_skeleton()</a></code>.</p>
<p>It is automatically populated with the names of the <code>code_files</code> and <code>data_objects</code> the passed in to datapackage_skeleton.</p>
<div id="the-datapackager-yml-file-" class="section level2">
<h2 class="hasAnchor">
<a href="#the-datapackager-yml-file-" class="anchor"></a>The <code>datapackager.yml</code> file.</h2>
<p>The structure of a correctly formatted <code>datapackager.yml</code> file is shown below:</p>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: yes
  objects: cars_over_20
  render_root:
    tmp: '237063'</code></pre>
</div>
<div id="yaml-config-file-properties-" class="section level2">
<h2 class="hasAnchor">
<a href="#yaml-config-file-properties-" class="anchor"></a>YAML config file properties.</h2>
<p>The main section of the file is the <code>configuration:</code> section.</p>
<p>It has three properties:</p>
<ul>
<li>
<p><code>files:</code></p>
<p>The files (<code>R</code> or <code>Rmd</code>) to be processed by DataPackageR. They are processed in the order shown. Users running multi-script workflows with dependencies between the scripts need to ensure the files are processed in the correct order.</p>
<p>Here <code>subsetCars.Rmd</code> is the only file to process. The name is transformed to an absolute path within the package.</p>
<p>Each file itself has just one property:</p>
<!-- - `name:`  -->
<p><!-- The name of the file. This is transformed to an absolute path within the package. --></p>
<ul>
<li>
<code>enabled:</code> A logical <code>yes</code>, <code>no</code> flag indicating whether the file should be rendered during the build, or whether it should be skipped. This is useful for ‘turning off’ long running processing tasks if they have not changed. Disabling processing of a file will not overwrite existing documentation or data objecs created during previous builds.</li>
</ul>
</li>
<li>
<p><code>objects:</code></p>
The names of the data objects created by the processing files, to be stored in the package. These names are compared against the objects created in the render environment by each file. They names must match.</li>
<li>
<p><code>render_root:</code></p>
<p>The directory where the <code>Rmd</code> or <code>R</code> files will be rendered. Defaults to a randomly named subdirectory of <code>tempdir()</code>. Allows workflows that use multiple scripts and create file system artifacts to function correctly by simply writing to and reading from the working directory.</p>
</li>
</ul>
</div>
<div id="editing-the-yaml-config-file-" class="section level2">
<h2 class="hasAnchor">
<a href="#editing-the-yaml-config-file-" class="anchor"></a>Editing the YAML config file.</h2>
<p>The structure of the YAML is simple enough to understand but complex enough that it can be a pain to edit by hand.</p>
<p>DataPackageR provides a number of API calls to construct, read, modify, and write the yaml config file.</p>
<div id="api-calls" class="section level3">
<h3 class="hasAnchor">
<a href="#api-calls" class="anchor"></a>API calls</h3>
<div id="construct_yml_config" class="section level4">
<h4 class="hasAnchor">
<a href="#construct_yml_config" class="anchor"></a><code>construct_yml_config</code>
</h4>
<p>Make an r object representing a YAML config file.</p>
<div id="example" class="section level5">
<h5 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h5>
<p>The YAML config shown above was created by:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Note this is done by the datapackage_skeleton. </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># The user doesn't usually need to call </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># construct_yml_config()</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">yml &lt;-<span class="st"> </span>DataPackageR<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/DataPackageR/topics/construct_yml_config">construct_yml_config</a></span>(</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="dt">code =</span> <span class="st">"subsetCars.Rmd"</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="dt">data =</span> <span class="st">"cars_over_20"</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  )</a></code></pre></div>
</div>
</div>
<div id="yml_find" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_find" class="anchor"></a><code>yml_find</code>
</h4>
<p>Read a yaml config file from a package path into an r object.</p>
<div id="example-1" class="section level5">
<h5 class="hasAnchor">
<a href="#example-1" class="anchor"></a>Example</h5>
<p>Read the YAML config file from the <code>mtcars20</code> example.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># returns an r object representation of</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co"># the config file.</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">mtcars20_config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_find</a></span>(</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="kw">file.path</span>(<span class="kw">tempdir</span>(),<span class="st">"mtcars20"</span>)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  )</a></code></pre></div>
</div>
</div>
<div id="yml_list_objects" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_list_objects" class="anchor"></a><code>yml_list_objects</code>
</h4>
<p>List the <code>objects</code> in a config read by <code>yml_find</code>.</p>
<div id="example-2" class="section level5">
<h5 class="hasAnchor">
<a href="#example-2" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">  <span class="kw"><a href="../reference/yaml.html">yml_list_objects</a></span>(yml)</a></code></pre></div>
<pre><code>
cars_over_20</code></pre>
</div>
</div>
<div id="yml_list_files" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_list_files" class="anchor"></a><code>yml_list_files</code>
</h4>
<p>List the <code>files</code> in a config read by <code>yml_find</code>.</p>
<div id="example-3" class="section level5">
<h5 class="hasAnchor">
<a href="#example-3" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">  <span class="kw"><a href="../reference/yaml.html">yml_list_files</a></span>(yml)</a></code></pre></div>
<pre><code>
subsetCars.Rmd</code></pre>
</div>
</div>
<div id="yml_disable_compile" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_disable_compile" class="anchor"></a><code>yml_disable_compile</code>
</h4>
<p>Disable compilation of named files in a config read by <code>yml_find</code>.</p>
<div id="example-4" class="section level5">
<h5 class="hasAnchor">
<a href="#example-4" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">yml_disabled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_disable_compile</a></span>(</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">    yml,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">    <span class="dt">filenames =</span> <span class="st">"subsetCars.Rmd"</span>)</a></code></pre></div>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: no
  objects: cars_over_20
  render_root:
    tmp: '963428'</code></pre>
</div>
</div>
<div id="yml_enable_compile" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_enable_compile" class="anchor"></a><code>yml_enable_compile</code>
</h4>
<p>Enable compilation of named files in a config read by <code>yml_find</code>.</p>
<div id="example-5" class="section level5">
<h5 class="hasAnchor">
<a href="#example-5" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">yml_enabled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_enable_compile</a></span>(</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">    yml,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">    <span class="dt">filenames =</span> <span class="st">"subsetCars.Rmd"</span>)</a></code></pre></div>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: yes
  objects: cars_over_20
  render_root:
    tmp: '963428'</code></pre>
</div>
</div>
<div id="yml_add_files" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_add_files" class="anchor"></a><code>yml_add_files</code>
</h4>
<p>Add named files to a config read by <code>yml_find</code>.</p>
<div id="example-6" class="section level5">
<h5 class="hasAnchor">
<a href="#example-6" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">yml_twofiles &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_add_files</a></span>(</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">    yml,</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">    <span class="dt">filenames =</span> <span class="st">"anotherFile.Rmd"</span>)</a></code></pre></div>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: yes
    anotherFile.Rmd:
      enabled: yes
  objects: cars_over_20
  render_root:
    tmp: '963428'</code></pre>
</div>
</div>
<div id="yml_add_objects" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_add_objects" class="anchor"></a><code>yml_add_objects</code>
</h4>
<p>Add named objects to a config read by <code>yml_find</code>.</p>
<div id="example-7" class="section level5">
<h5 class="hasAnchor">
<a href="#example-7" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">yml_twoobj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_add_objects</a></span>(</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">    yml_twofiles,</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">    <span class="dt">objects =</span> <span class="st">"another_object"</span>)</a></code></pre></div>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: yes
    anotherFile.Rmd:
      enabled: yes
  objects:
  - cars_over_20
  - another_object
  render_root:
    tmp: '963428'</code></pre>
</div>
</div>
<div id="yml_remove_files" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_remove_files" class="anchor"></a><code>yml_remove_files</code>
</h4>
<p>Remove named files from a config read by <code>yml_find</code>.</p>
<div id="example-8" class="section level5">
<h5 class="hasAnchor">
<a href="#example-8" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">yml_twoobj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_remove_files</a></span>(</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">    yml_twoobj,</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">    <span class="dt">filenames =</span> <span class="st">"anotherFile.Rmd"</span>)</a></code></pre></div>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: yes
  objects:
  - cars_over_20
  - another_object
  render_root:
    tmp: '963428'</code></pre>
</div>
</div>
<div id="yml_remove_objects" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_remove_objects" class="anchor"></a><code>yml_remove_objects</code>
</h4>
<p>Remove named objects from a config read by <code>yml_find</code>.</p>
<div id="example-9" class="section level5">
<h5 class="hasAnchor">
<a href="#example-9" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">yml_oneobj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/yaml.html">yml_remove_objects</a></span>(</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">    yml_twoobj,</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">    <span class="dt">objects =</span> <span class="st">"another_object"</span>)</a></code></pre></div>
<pre><code>configuration:
  files:
    subsetCars.Rmd:
      enabled: yes
  objects: cars_over_20
  render_root:
    tmp: '963428'</code></pre>
</div>
</div>
<div id="yml_write" class="section level4">
<h4 class="hasAnchor">
<a href="#yml_write" class="anchor"></a><code>yml_write</code>
</h4>
<p>Write a modified config to its package path.</p>
<div id="example-10" class="section level5">
<h5 class="hasAnchor">
<a href="#example-10" class="anchor"></a>Example</h5>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="../reference/yaml.html">yml_write</a></span>(yml_oneobj, <span class="dt">path =</span> <span class="st">"path_to_package"</span>)</a></code></pre></div>
<p>The <code>yml_oneobj</code> read by <code><a href="../reference/yaml.html">yml_find()</a></code> carries an attribute that is the path to the package. The user doesn’t need to pass a <code>path</code> to <code>yml_write</code> if the config has been read by <code>yml_find</code>.</p>
</div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#configuring-and-controlling-datapackager-builds-">Configuring and controlling DataPackageR builds.</a><ul class="nav nav-pills nav-stacked">
<li><a href="#the-datapackager-yml-file-">The <code>datapackager.yml</code> file.</a></li>
      <li><a href="#yaml-config-file-properties-">YAML config file properties.</a></li>
      <li><a href="#editing-the-yaml-config-file-">Editing the YAML config file.</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Greg Finak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
